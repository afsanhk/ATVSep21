# KanPlan

KanPlan is a project management web app to make organizing your ideas easier!

### Pages

1. Home Page
2. Project Page
3. Project Overview Page
4. Gantt Page
5. Kanban Page

## Final Product

### Home Page

![login](https://github.com/mhmozaffari1985/LHL-midterm-project/blob/master/docs/login-page.png?raw=true)

### Project Page

![registration](https://github.com/mhmozaffari1985/LHL-midterm-project/blob/master/docs/register-page.png?raw=true)

### Project Overview Page

![allTasks](https://github.com/mhmozaffari1985/LHL-midterm-project/blob/master/docs/tasks-page.png?raw=true)

### Gantt Page

![allTasksCategorized](https://github.com/mhmozaffari1985/LHL-midterm-project/blob/master/docs/categories-page.png?raw=true)

### Kanban Page

![categoryTasks](https://github.com/mhmozaffari1985/LHL-midterm-project/blob/master/docs/subcategory-page.png?raw=true)

### Add Task

![addTask](https://github.com/mhmozaffari1985/LHL-midterm-project/blob/master/docs/add-task.gif)

### Edit Task

![editTask](https://github.com/mhmozaffari1985/LHL-midterm-project/blob/master/docs/edit-button.gif?raw=true)

### Edit Category

![editCategory](https://github.com/mhmozaffari1985/LHL-midterm-project/blob/master/docs/edit-category.gif?raw=true)

### Complete Task

![completeTask](https://github.com/mhmozaffari1985/LHL-midterm-project/blob/master/docs/complete-task.gif)

### Delete Task

![deleteTask](https://github.com/mhmozaffari1985/LHL-midterm-project/blob/master/docs/delete-task.gif)

### Complete List

![completeList](https://github.com/mhmozaffari1985/LHL-midterm-project/blob/master/docs/complete-list.gif)

## Getting Started

### Setup API (/server)

Install dependencies with `npm install`

### Creating the DB

User the `psql -U development` command to login to the PostgreSQL server with the username `development` and the password `development`. This command **MUST** be run in a vagrant terminal, we used the PostgreSQL installation provided in the vagrant environment.

Create a database with the command `CREATE DATABASE kanplan_development;`.

Copy the `.env.example` file to `.env.development` and fill in the necessary PostgreSQL configuration. The `none-postgres` library uses these environment variables by default.

```
PGHOST=localhost
PGUSER=development
PGDATABASE=kanplan_development
PGPASSWORD=development
PGPORT=5432
```

### Seeding

Run the development server with `npm start` in the Host environment.

- Make a `GET` request to `/api/debug/reset` with `curl http://localhost:8001/api/debug/reset`.
- Use the browser to navigate to `http://localhost:8001/api/debug/reset`.

### Run The Server

Running the server normally

```sh
npm start
```

### API

#### Projects

`GET /api/projects`

Response

```json
{
  {
    "id": 1,
    "proj_name": "KanPlan",
    "manager_id": 1,
    "planned_start": "2021-09-11T02:56:02.261Z",
    "planned_end": "2021-09-11T02:56:02.261Z",
    "proj_description": "KanPlan is a project management web app to make organizing your ideas easier!",
    "manager_name": "TJ Jung",
    "team_members": [
      1,
      2,
      3
    ],
    "project_tasks": [
      1,
      2,
      3,
      4,
      5,
      6,
      7,
      8,
      9,
      10,
      11,
      20,
      21,
      22,
      23,
      24,
      25,
      26,
      27,
      28,
      29
    ]
  }
}
```

#### Tasks

`GET /api/tasks`

Response

```json
{
  {
    "id": 1,
    "title": "API Routes",
    "task_description": "Set up API Routes",
    "priority_id": 2,
    "status_id": 4,
    "project_id": 1,
    "plan_start": "2021-08-27",
    "plan_end": "2021-08-28",
    "kanban_order": -1,
    "proj_name": "KanPlan",
    "priority_name": "Low",
    "status": "Done",
    "task_users": [
      2
    ]
  }
}
```

#### Users

`GET /api/users`
Response

```json
{
  {
    "id": 1,
    "user_name": "TJ Jung",
    "email": "thisis@email.com",
    "last_login": "2021-09-11T02:56:02.261Z",
    "user_tasks": [
      2,
      3,
      4,
      5,
      6,
      8,
      9,
      11,
      20,
      21,
      22,
      23,
      24,
      25,
      26,
      27,
      28
    ],
    "user_projects": [
      1,
      2,
      3,
      4,
      5,
      6,
      7,
      8,
      9,
      10,
      11,
      12,
      13,
      14,
      15,
      16,
      17
    ]
  }
}
```

## Warnings & Tips

- Do not edit the `layout.css` file directly, it is auto-generated by `layout.scss`
- Use the `npm run db:reset` command each time there is a change to the database schema or seeds.
  - It runs through each of the files, in order, and executes them against the database.
  - Note: you will lose all newly created (test) data each time this is run, since the schema files will tend to `DROP` the tables and recreate them.

## Dependencies

- Node 10.x or above
- NPM 5.x or above
- PG 6.x
- Express
- Node-sass-middleware
- EJS
- Morgan
- Chalk
- bcrypt
- body-parser
- cookie-session
- pg
- pg-native
- superagent
- yelp-fusion
- omdb-client
- google-books-search

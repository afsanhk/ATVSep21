# KanPlan

KanPlan is a project management web app to make organizing your ideas easier!

## Pages

1. Home Page
2. Project Page
3. Project Overview Page
4. Gantt Page
5. Kanban Page

## Final Product

### Home Page

![homepage]()

### Project Page

![projectpage]()

### Add Project

![addproject]()

### Delete Project

![deleteproject]()

### Project Overview Page

![projectoverviewpage]()

### Gantt Page

![ganttpage]()

### Kanban Page

![kanbanpage]()

### Add Task

![addTask]()

### Edit Task

![editTask]()

### Edit Status

![editstatus]()

### Edit Priority

![editpriority]()

### Delete Task

![deleteTask]()

# Getting Started

## Setup API (/server)

Install dependencies with `npm install`

## Creating the DB

User the `psql -U development` command to login to the PostgreSQL server with the username `development` and the password `development`. This command **MUST** be run in a vagrant terminal, we used the PostgreSQL installation provided in the vagrant environment.

Create a database with the command `CREATE DATABASE kanplan_development;`.

Copy the `.env.example` file to `.env.development` and fill in the necessary PostgreSQL configuration. The `none-postgres` library uses these environment variables by default.

```
PGHOST=localhost
PGUSER=development
PGDATABASE=kanplan_development
PGPASSWORD=development
PGPORT=5432
```

## Seeding

Run the development server with `npm start` in the Host environment.

- Make a `GET` request to `/api/debug/reset` with `curl http://localhost:8001/api/debug/reset`.
- Use the browser to navigate to `http://localhost:8001/api/debug/reset`.

## Run The Server

Running the server normally

```sh
npm start
```

## API

### Projects

`GET /api/projects`

Response

```json
{
  {
    "id": 1,
    "proj_name": "KanPlan",
    "manager_id": 1,
    "planned_start": "2021-09-11T02:56:02.261Z",
    "planned_end": "2021-09-11T02:56:02.261Z",
    "proj_description": "KanPlan is a project management web app to make organizing your ideas easier!",
    "manager_name": "TJ Jung",
    "team_members": [
      ...
    ],
    "project_tasks": [
      ...
    ]
  }
}
```

### Tasks

`GET /api/tasks`

Response

```json
{
  {
    "id": 1,
    "title": "API Routes",
    "task_description": "Set up API Routes",
    "priority_id": 2,
    "status_id": 4,
    "project_id": 1,
    "plan_start": "2021-08-27",
    "plan_end": "2021-08-28",
    "kanban_order": -1,
    "proj_name": "KanPlan",
    "priority_name": "Low",
    "status": "Done",
    "task_users": [
      ...
    ]
  }
}
```

### Users

`GET /api/users`

Response

```json
{
  {
    "id": 1,
    "user_name": "TJ Jung",
    "email": "thisis@email.com",
    "last_login": "2021-09-11T02:56:02.261Z",
    "user_tasks": [
      ...
    ],
    "user_projects": [
      ...
    ]
  }
}
```

### Members

`GET /api/member/project/:id`

Response

```json
{
  {
    "manager_id": 1,
    "project_id": 1,
    "team_members": [
      ...
    ]
  }
}
```

### Kanban Orders

`GET /api/kanban/project/:id`

Response

```json
{
  {
    "id": 1,
    "status": "To-Do",
    "task_id": [
      ...
    ]
  }
}
```

## Warnings & Tips

- Do not edit the `layout.css` file directly, it is auto-generated by `layout.scss`
- Use the `npm run db:reset` command each time there is a change to the database schema or seeds.
- It runs through each of the files, in order, and executes them against the database.
- Note: you will lose all newly created (test) data each time this is run, since the schema files will tend to `DROP` the tables and recreate them.

## Dependencies

- Node 12.x
- NPM 6.x
- PG 6.x
- Express
- Node-sass-middleware
- Morgan
- Chalk
- bcrypt
- body-parser
- cookie-session
- pg
- pg-native
- superagent
- yelp-fusion
- omdb-client
- google-books-search
